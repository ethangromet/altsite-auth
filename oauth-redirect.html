<!DOCTYPE html>
<html>
<head>
    <title>Altsite Auth Redirect</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
        }
        #message {
            padding: 20px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
    <script>
        window.onload = function() {
            // Extract the access token from the URL hash
            const params = new URLSearchParams(window.location.hash.substring(1));
            const accessToken = params.get('access_token');
            
            if (accessToken) {
                // Send the token back to the extension
                if (window.opener) {
                    window.opener.postMessage({ 
                        type: 'oauth-response', 
                        token: accessToken 
                    }, '*');
                    // Close after a short delay to ensure the message is sent
                    setTimeout(() => window.close(), 100);
                }
                document.getElementById('message').textContent = 'Authentication successful! You can close this window.';
            } else {
                document.getElementById('message').textContent = 'Authentication failed. You can close this window.';
            }
        };
    </script>
</head>
<body>
    <div id="message">Completing authentication...</div>
</body>
</html> 